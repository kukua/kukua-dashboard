<?php
defined('BASEPATH') OR exit('No direct script access allowed');

class Migration_removal_previous_tables extends CI_Migration {

	public function up() {
		$this->dbforge->drop_table('users_countries');
		$this->dbforge->drop_table('countries');
		$this->dbforge->drop_table('countries_columns');
		$this->dbforge->drop_table('stations_columns');
	}

	public function down() {

		/** Re-create previous tables **/

		#countries
		$this->dbforge->add_field([
			"id" => [
				"type" => "INT",
				"constraint" => 11,
				'unsigned' => true,
				"auto_increment" => true,
			],
			"code" => [
				"type" => "VARCHAR",
				"constraint" => 100,
			],
			"name" => [
				"type" => "VARCHAR",
				"constraint" => 255,
			],
			"created" => [
				"type" => "DATETIME",
				"null" => TRUE,
			]
		]);
		$this->dbforge->add_key("id", true);
		$this->dbforge->create_table("countries");

		#user_countries
		$this->dbforge->add_field([
			"id" => [
				"type" => "INT",
				"constraint" => 11,
				'unsigned' => true,
				"auto_increment" => true,
			],
			"user_id" => [
				"type" => "INT",
				"constraint" => 11
			],
			"country_id" => [
				"type" => "INT",
				"constraint" => 11
			]
		]);
		$this->dbforge->add_key("id", true);
		$this->dbforge->create_table("users_countries");

		#countries_columns
		$this->dbforge->add_field([
			"id" => [
				"type" => "INT",
				"constraint" => 11,
				'unsigned' => true,
				"auto_increment" => true,
			],
			"country_id" => [
				"type" => "INT",
				"constraint" => 11,
			],
			"name" => [
				"type" => "VARCHAR",
				"constraint" => 25,
			],
			"visible" => [
				"type" => "INT",
				"constraint" => "1",
			]
		]);
		$this->dbforge->add_key("id", true);
		$this->dbforge->create_table("countries_columns");

		#station_columns
		$this->dbforge->add_field([
			"id" => [
				"type" => "INT",
				"constraint" => 11,
				'unsigned' => true,
				"auto_increment" => true,
			],
			"station_id" => [
				"type" => "INT",
				"constraint" => 11,
			],
			"country_column_id" => [
				"type" => 'INT',
				'constraint' => 11
			],
			"key" => [
				"type" => "VARCHAR",
				"constraint" => 25,
			],
			"value" => [
				"type" => "VARCHAR",
				"constraint" => "100",
			]
		]);
		$this->dbforge->add_key("id", true);
		$this->dbforge->create_table("stations_columns");


		$this->db->query("INSERT INTO `countries` (`id`, `code`, `name`, `created`) VALUES
(1,'tz','Tanzania',NULL),
(2,'ng','Nigeria',NULL),
(3,'gh','Ghana',NULL),
(4,'mz','Mozambique',NULL),
(5,'ke','Kenya',NULL),
(6,'','Test','2016-02-06 16:39:41'),
(7,'','Kees','2016-02-09 17:05:30'),
(8,'HI','Hilversum','2016-03-10 13:07:25'),
(9,'UK','United Kingdom','2016-04-01 13:36:14'),
(10,'ITa','Itay','2016-04-08 12:03:39')");

		$this->db->query("INSERT INTO `users_countries` (`id`, `user_id`, `country_id`) VALUES
(3,3,1),
(5,5,1),
(6,6,1),
(8,8,1),
(9,9,1),
(10,10,1),
(11,11,1),
(13,13,1),
(15,15,1),
(16,16,1),
(18,18,1),
(19,19,1),
(20,20,1),
(21,21,1),
(22,22,1),
(23,23,1),
(24,24,1),
(25,25,1),
(26,26,1),
(27,27,1),
(28,28,1),
(30,30,1),
(31,31,1),
(32,32,1),
(33,33,1),
(34,34,1),
(35,35,1),
(50,38,1),
(81,41,1),
(82,41,2),
(83,41,3),
(84,42,7),
(85,43,7),
(132,39,1),
(133,37,1),
(134,40,1),
(135,44,1),
(136,45,1),
(138,47,1),
(139,48,1),
(140,49,1),
(141,50,1),
(142,51,1),
(144,12,1),
(145,12,7),
(146,46,1),
(147,53,1),
(148,53,2),
(149,54,1),
(150,55,1),
(151,56,1),
(152,57,1),
(153,58,1),
(161,59,1),
(162,60,1),
(170,61,1),
(171,62,6),
(172,62,7),
(177,29,1),
(178,64,1),
(179,65,1),
(180,66,1),
(181,67,1),
(183,69,4),
(185,71,1),
(186,72,1),
(187,73,1),
(188,74,1),
(189,75,1),
(190,76,1),
(191,77,1),
(192,78,1),
(193,79,1),
(194,70,4),
(195,80,1),
(196,81,1),
(197,82,1),
(198,83,1),
(199,84,1),
(200,85,1),
(201,86,1),
(202,87,1),
(203,63,1),
(204,63,2),
(205,63,3),
(206,63,4),
(207,63,5),
(208,63,6),
(209,63,7),
(210,68,4),
(219,2,1),
(220,2,2),
(221,2,3),
(222,2,4),
(223,2,5),
(224,2,6),
(225,2,7),
(226,2,8),
(227,14,1),
(228,88,1),
(229,89,1),
(230,90,1),
(239,4,1),
(240,4,2),
(241,4,3),
(242,4,4),
(243,4,5),
(244,4,6),
(245,4,7),
(246,4,8),
(247,17,5),
(257,1,1),
(258,1,2),
(259,1,3),
(260,1,4),
(261,1,5),
(262,1,6),
(263,1,7),
(264,1,8),
(265,1,9),
(266,1,10),
(268,91,10),
(269,7,1),
(270,7,2),
(271,7,3),
(272,7,4),
(273,7,5),
(274,7,6),
(275,7,7),
(276,7,8),
(277,7,9),
(278,7,10)");

$this->db->query("INSERT INTO `countries_columns` (`id`, `country_id`, `name`, `visible`) VALUES
(1,1,'Temperature',1),
(2,1,'Rainfall',1),
(3,1,'Humidity',1),
(4,1,'Pressure',1),
(5,1,'Wind',1),
(6,1,'WindDirection',0),
(7,1,'WindGusts',0),
(8,1,'WindGustDirection',0),
(9,1,'Battery',1),
(10,2,'Temperature',1),
(11,2,'Rainfall',1),
(12,2,'Humidity',1),
(13,2,'Pressure',1),
(14,2,'Wind',1),
(15,2,'WindDirection',0),
(16,2,'WindGusts',0),
(17,2,'WindGustDirection',0),
(18,2,'Battery',0),
(19,3,'Temperature',1),
(20,3,'Rainfall',1),
(21,3,'Humidity',1),
(22,3,'Pressure',1),
(23,3,'Wind',1),
(24,3,'WindDirection',0),
(25,3,'WindGusts',0),
(26,3,'WindGustDirection',0),
(27,3,'Battery',0),
(28,4,'Temperature',1),
(29,4,'Rainfall',1),
(30,4,'Humidity',1),
(31,4,'Pressure',1),
(32,4,'Wind',1),
(34,4,'WindDirection',0),
(35,4,'WindGusts',0),
(36,4,'WindGustDirection',0),
(37,4,'Battery',0),
(38,5,'Temperature',1),
(39,5,'Rainfall',1),
(40,5,'Humidity',1),
(41,5,'Pressure',1),
(42,5,'Wind',1),
(43,5,'WindDirection',0),
(44,5,'WindGusts',0),
(45,5,'WindGustDirection',0),
(46,5,'Battery',1),
(47,6,'Temperature',1),
(48,6,'Rainfall',1),
(49,6,'Humidity',1),
(50,6,'Pressure',1),
(51,6,'Wind',1),
(52,6,'WindDirection',0),
(53,6,'WindGusts',0),
(54,6,'WindGustDirection',0),
(55,6,'Battery',0),
(56,7,'Temperature',1),
(57,7,'Rainfall',1),
(58,7,'Humidity',1),
(59,7,'Pressure',1),
(60,7,'Wind',1),
(61,7,'WindDirection',1),
(62,7,'WindGusts',1),
(63,7,'WindGustDirection',1),
(64,7,'Battery',1),
(66,5,'BiodigesterPres',1),
(67,7,'Apogee',0),
(68,8,'Temperature',1),
(69,8,'Rainfall',1),
(70,8,'Humidity',1),
(71,8,'Wind',1),
(72,8,'Pressure',1),
(73,8,'Battery',1),
(74,9,'Temperature',1),
(75,9,'Rainfall',1),
(76,9,'Humidity',1),
(77,9,'Pressure',1),
(78,9,'Wind',1),
(79,9,'Battery',1),
(80,10,'Temperature',1),
(81,10,'Rainfall',1),
(82,10,'Humidity',1),
(83,10,'Pressure',1),
(84,10,'Wind',1),
(85,10,'Battery',1),
(86,10,'Apogee',1),
(87,10,'SoilMoisture',1),
(88,10,'SHT2xTemp',1),
(89,10,'SHT2xHumid',1),
(90,10,'BmpTemp',1),
(91,10,'BmpPress',1),
(92,10,'SolarIrradAvg',1),
(93,10,'SolarIrradMax',1),
(94,10,'SolarRadiationAvg',1)");

		$this->db->query("INSERT INTO `stations_columns` (`id`, `station_id`, `value`, `country_column_id`) VALUES
(1,1,'temp',1),
(2,1,'rainTicks',2),
(3,1,'hum',3),
(4,1,'presBMP',4),
(5,1,'windTicks',5),
(6,1,'windDir',6),
(7,1,'windGustTicks',7),
(8,1,'windGustDir',8),
(9,1,'batVolt',9),
(10,2,'temp',1),
(11,2,'rainTicks',2),
(12,2,'hum',3),
(13,2,'presBMP',4),
(14,2,'windTicks',5),
(15,2,'windDir',6),
(16,2,'windGustTicks',7),
(17,2,'windGustDir',8),
(18,2,'batVolt',9),
(19,3,'temp',1),
(20,3,'rainTicks',2),
(21,3,'hum',3),
(22,3,'presBMP',4),
(23,3,'windTicks',5),
(24,3,'windDir',6),
(25,3,'windGustTicks',7),
(26,3,'windGustDir',8),
(27,3,'batVolt',9),
(28,4,'temp',1),
(29,4,'rainTicks',2),
(30,4,'hum',3),
(31,4,'presBMP',4),
(32,4,'windTicks',5),
(33,4,'windDir',6),
(34,4,'windGustTicks',7),
(35,4,'windGustDir',8),
(36,4,'batVolt',9),
(37,5,'temp',1),
(38,5,'rainTicks',2),
(39,5,'hum',3),
(40,5,'presBMP',4),
(41,5,'windTicks',5),
(42,5,'windDir',6),
(43,5,'windGustTicks',7),
(44,5,'windGustDir',8),
(45,5,'batVolt',9),
(46,6,'temp',1),
(47,6,'rainTicks',2),
(48,6,'hum',3),
(49,6,'presBMP',4),
(50,6,'windTicks',5),
(51,6,'windDir',6),
(52,6,'windGustTicks',7),
(53,6,'windGustDir',8),
(54,6,'batVolt',9),
(55,7,'temp',1),
(56,7,'rainTicks',2),
(57,7,'hum',3),
(58,7,'presBMP',4),
(59,7,'windTicks',5),
(60,7,'windDir',6),
(61,7,'windGustTicks',7),
(62,7,'windGustDir',8),
(63,7,'batVolt',9),
(64,8,'temp',1),
(65,8,'rainTicks',2),
(66,8,'hum',3),
(67,8,'presBMP',4),
(68,8,'windTicks',5),
(69,8,'windDir',6),
(70,8,'windGustTicks',7),
(71,8,'windGustDir',8),
(72,8,'batVolt',9),
(73,9,'temp',1),
(74,9,'rainTicks',2),
(75,9,'hum',3),
(76,9,'presBMP',4),
(77,9,'windTicks',5),
(78,9,'windDir',6),
(79,9,'windGustTicks',7),
(80,9,'windGustDir',8),
(81,9,'batVolt',9),
(82,31,'temp',1),
(83,31,'rainTicks',2),
(84,31,'hum',3),
(85,31,'presBMP',4),
(86,31,'windTicks',5),
(87,31,'windDir',6),
(88,31,'windGustTicks',7),
(89,31,'windGustDir',8),
(90,31,'batVolt',9),
(91,12,'temp',10),
(92,12,'rainTicks',11),
(93,12,'hum',12),
(94,12,'presBMP',13),
(95,12,'windTicks',14),
(96,12,'windDir',15),
(97,12,'windGustTicks',16),
(98,12,'windGustDir',17),
(99,12,'batVolt',18),
(109,37,'temp',10),
(110,37,'rainTicks',11),
(111,37,'hum',12),
(112,37,'presBMP',13),
(113,37,'windTicks',14),
(114,37,'windDir',15),
(115,37,'windGustTicks',16),
(116,37,'windGustDir',17),
(117,37,'batVolt',18),
(118,32,'tempBMP085',10),
(119,32,'rainTicks1',11),
(120,32,'humSHT21',12),
(121,32,'presBMP085',13),
(122,32,'windTicks',14),
(123,32,'windDir',15),
(124,32,'windGustTicks',16),
(125,32,'windGustDir',17),
(126,32,'batVolt',18),
(127,14,'temp',19),
(128,14,'rainTicks',20),
(129,14,'hum',21),
(130,14,'presBMP',22),
(131,14,'windTicks',23),
(132,14,'windDir',24),
(133,14,'windGustTicks',25),
(134,14,'windGustDir',26),
(135,14,'batVolt',27),
(136,15,'temp',19),
(137,15,'rainTicks',20),
(138,15,'hum',21),
(139,15,'presBMP',22),
(140,15,'windTicks',23),
(141,15,'windDir',24),
(142,15,'windGustTicks',25),
(143,15,'windGustDir',26),
(144,15,'batVolt',27),
(145,16,'tempBMP085',28),
(146,16,'rainTicks1',29),
(147,16,'humSHT21',30),
(148,16,'presBMP085',31),
(149,16,'windTicks',32),
(150,16,'windDir',34),
(151,16,'windGustTicks',35),
(152,16,'windGustDir',36),
(153,16,'batVolt',37),
(154,17,'tempBMP085',28),
(155,17,'rainTicks1',29),
(156,17,'humSHT21',30),
(157,17,'presBMP085',31),
(158,17,'windTicks',32),
(159,17,'windDir',34),
(160,17,'windGustTicks',35),
(161,17,'windGustDir',36),
(162,17,'batVolt',37),
(163,33,'temp',38),
(164,33,'rainTicks',39),
(165,33,'hum',40),
(166,33,'presBMP',41),
(167,33,'windTicks',42),
(168,33,'windDir',43),
(169,33,'windGustTicks',44),
(170,33,'windGustDir',45),
(171,33,'batVolt',46),
(172,35,'temp',38),
(173,35,'rainTicks',39),
(174,35,'hum',40),
(175,35,'presBMP',41),
(176,35,'windTicks',42),
(177,35,'windDir',43),
(178,35,'windGustTicks',44),
(179,35,'windGustDir',45),
(180,35,'batVolt',46),
(181,36,'temp',38),
(182,36,'rainTicks',39),
(183,36,'hum',40),
(184,36,'presBMP',41),
(185,36,'windTicks',42),
(186,36,'windDir',43),
(187,36,'windGustTicks',44),
(188,36,'windGustDir',45),
(189,36,'batVolt',46),
(190,21,'bmpTemp',56),
(191,21,'rainMMsum',57),
(192,21,'humidityAvg',58),
(193,21,'bmpPress',59),
(194,21,'windIntAvg',60),
(195,21,'windDirAvg',61),
(196,21,'windIntMax',62),
(197,21,'windDirMax',63),
(198,21,'batteryMV',64),
(200,33,'gasPres',66),
(201,35,'gasPres',66),
(202,36,'gasPres',66),
(203,39,'Apogee',67),
(204,41,'bmpTemp',56),
(205,41,'rainMMsum',57),
(206,41,'humidityAvg',58),
(207,41,'bmpPress',59),
(208,41,'windIntAvg',60),
(209,41,'windDirAvg',61),
(210,41,'windIntMax',62),
(211,41,'windDirMax',63),
(212,41,'batteryMV',64),
(213,42,'TempCAvg',68),
(214,42,'RainMMSum',69),
(215,42,'WindIntAvg',71),
(216,42,'BmpPress',72),
(217,42,'BatteryMV',73),
(218,43,'TempCAvg',68),
(219,43,'RainMMSum',69),
(220,43,'WindIntAvg',71),
(221,43,'BmpPress',72),
(222,43,'BatteryMV',73),
(223,44,'TempCAvg',68),
(224,44,'RainMMSum',69),
(225,44,'WindIntAvg',71),
(226,44,'BmpPress',72),
(227,44,'BatteryMV',73),
(228,45,'TempCAvg',68),
(229,45,'RainMMSum',69),
(230,45,'WindIntAvg',71),
(231,45,'BmpPress',72),
(232,45,'BatteryMV',73),
(233,46,'TempCAvg',68),
(234,46,'RainMMSum',69),
(235,46,'WindIntAvg',71),
(236,46,'BmpPress',72),
(237,46,'BatteryMV',73),
(238,47,'TempCAvg',68),
(239,47,'RainMMSum',69),
(240,47,'WindIntAvg',71),
(241,47,'BmpPress',72),
(242,47,'BatteryMV',73),
(243,48,'TempCAvg',68),
(244,48,'RainMMSum',69),
(245,48,'WindIntAvg',71),
(246,48,'BmpPress',72),
(247,48,'BatteryMV',73),
(248,49,'TempCAvg',68),
(249,49,'RainMMSum',69),
(250,49,'WindIntAvg',71),
(251,49,'BmpPress',72),
(252,49,'BatteryMV',73),
(253,50,'TempCAvg',68),
(254,50,'RainMMSum',69),
(255,50,'WindIntAvg',71),
(256,50,'BmpPress',72),
(257,50,'BatteryMV',73),
(258,51,'TempCAvg',68),
(259,51,'RainMMSum',69),
(260,51,'WindIntAvg',71),
(261,51,'BmpPress',72),
(262,51,'BatteryMV',73),
(263,52,'TempCAvg',68),
(264,52,'RainMMSum',69),
(265,52,'WindIntAvg',71),
(266,52,'BmpPress',72),
(267,52,'BatteryMV',73),
(270,34,'tempBmp',47),
(271,28,'tempBMP085',47),
(272,28,'rainTicks1',48),
(273,28,'humSHT21',49),
(274,28,'presBMP085',50),
(275,28,'windTicks',51),
(276,29,'tempBMP085',47),
(277,29,'rainTicks1',48),
(278,29,'humSHT21',49),
(279,29,'presBMP085',50),
(280,29,'windTicks',51),
(281,54,'TempCAvg',68),
(282,54,'RainMMSum',69),
(283,54,'WindIntAvg',71),
(284,54,'BmpPress',72),
(285,54,'BatteryMV',73),
(286,40,'tempBmp',47),
(287,55,'temp',10),
(288,55,'rainTicks',11),
(289,55,'hum',12),
(290,55,'presBMP',13),
(291,55,'windTicks',14),
(292,55,'windDir',15),
(293,55,'windGustTicks',16),
(294,55,'windGustDir',17),
(295,55,'batVolt',18),
(296,56,'temp',74),
(297,56,'rainTicks',75),
(298,56,'hum',76),
(299,56,'presBMP',77),
(300,56,'windTicks',78),
(301,56,'batVolt',79),
(302,57,'TempCAvg',80),
(303,57,'RainMMSum',81),
(304,57,'HumidityAvg',82),
(305,57,'BmpPress',83),
(306,57,'WindIntAvg',84),
(307,57,'BatteryMV',85),
(308,57,'Apogee',86),
(309,57,'SoilMoistureAvg',87),
(310,57,'SHT2xTemp',88),
(311,57,'SHT2xHumid',89),
(312,57,'BmpTemp',90),
(313,57,'BmpPress',91),
(314,57,'SolarIrradAvg',92),
(315,57,'SolarIrradMax',93),
(316,57,'SolarRadiationAvg',94)");

	}
}
